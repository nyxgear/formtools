!function(i){function a(r){f.find(s.error.class).removeClass(s.error.class.replace(".","")),s.error.fields&&i(s.error.fields).text(""),(s.verbose||r)&&f.find("input, select, textarea").each(function(){var t=i(this);if(void 0!==t.data("ft-date-format")&&(s.dateFormat=t.data("ft-date-format")),s.verbose&&t.attr("aria-describedby")&&i("#"+t.attr("aria-describedby")).detach(),r&&void 0!==r[t.attr("name")])if("date"==t.attr("type")){var e=moment(r[t.attr("name")],s.dateFormat,!0);t.val(e.format(s.dateFormat))}else t.val(r[t.attr("name")])})}function r(e){var r=!0;return s.hooks.preValidate(f),a(),f.find("input, select, textarea").each(function(){var t=i(this);t.prop("disabled")||function(t,e){var r=!0;if(s=i.extend(!0,{},d,i.fn.formtools.settings,f.data("ft-settings"),m(),l(t)),t.val()||!s.v.ftOptional){if(s.v.ftRequired&&!t.val()&&(r=!1,s.error.dMsg=v("ft-required")),s.v.ftMinLength&&t.val().length<s.v.ftMinLength&&(r=!1,s.error.dMsg=v("ft-minlength")+" "+s.v.ftMinLength),s.v.ftRegex)new RegExp(s.v.ftRegex).test(t.val())||(r=!1,s.error.dMsg=v("ft-regex"));if("SELECT"!=t.prop("tagName")&&0<t.val().length)switch(t.attr("type")){case"email":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.val())||(r=!1,s.error.dMsg=v("ft-email-validation"));break;case"date":if(s.v.ftDateFormat){var a={};s.v.ftDateRange&&(a=s.v.ftDateRange.split(":"));var o=moment(t.val(),s.v.ftDateFormat,!0);o.isValid()?void 0!==a[0]&&void 0!==a[1]&&(a[0]&&(a.min=moment(a[0],moment.ISO_8601),a.min.isAfter(o)&&(r=!1,s.error.dMsg=v("ft-date-after")+" "+a.min.format(s.v.ftDateFormat))),a[1]&&(a.max=moment(a[1],moment.ISO_8601),a.max.isBefore(o)&&(r=!1,s.error.dMsg=v("ft-date-before")+" "+a.max.format(s.v.ftDateFormat)))):(r=!1,s.error.dMsg=v("ft-date-validation")+" "+s.v.ftDateFormat)}}}if(!r&&(!e||e(t,s.error))){if(t.closest(s.error.parent).addClass(s.error.class.replace(".","")),s.error.msg||(s.error.msg=s.error.dMsg),s.verbose){var n=t.attr("id")||(new Date).getTime();n="_ft-err-"+n,t.attr("aria-describedby",n),i.fn.formtools.formatErrorMsg(t,n,s.error.msg)}s.error.fields&&i(s.error.fields).append(s.error.msg+"<br>")}return r}(t,e)||(r=!1)}),s.hooks.postValidate(f),r}var f,s,e;i.fn.formtools=function(t,e){if("FORM"==this.prop("tagName")){if(f=this,s=i.extend(!0,{},d,i.fn.formtools.settings,this.data("ft-settings"),m()),"validate"===t)return"function"==typeof e?r(e):r();if("reset"===t)return function(t){s.hooks.preReset(f,t),f.trigger("reset"),a(t),s.hooks.postReset(f,t)}(e);"settings"===t?f.data("ft-settings",e):(console.error("[form2] WARNING: invalid action"),console.error("[form2] given action:",t))}else console.warn("[form2] WARNING: attempted execution of an action on non-form object"),console.warn("[form2] action:"),console.warn(t),console.warn("[form2] object:"),console.warn(this)};var d={hooks:{preValidate:function(t){},postValidate:function(t){},preReset:function(t,e){},postReset:function(t,e){}},verbose:!0,v:{ftDateFormat:"DD/MM/YYYY"},error:{parent:".form-group",class:".has-error",fields:"",msg:""},language:"en",translation:{en:{"ft-required":"Required field","ft-minlength":"Minimum characters required:","ft-regex":"Error","ft-email-validation":"Invalid email address","ft-date-validation":"Wrong date. Required date format as:","ft-date-range-after":"Required date after:","ft-date-range-before":"Required date before:"},it:{"ft-required":"Campo obbligatorio","ft-minlength":"Minimo caratteri richiesti: ","ft-regex":"Errore nel campo","ft-email-validation":"Indirizzo email non valido","ft-date-validation":"Data non valida. Formato data: ","ft-date-range-after":"Richiesta una data succesiva a: ","ft-date-range-before":"Richiesta una data precedente a: "}}};i.fn.formtools.settings={hooks:{},v:{},error:{},translation:{}};var l=function(t){var e={v:{},error:{}};return void 0!==t.data("ft-required")&&!(e.v.ftRequired=!0)===t.data("ft-required")&&(e.v.ftRequired=!1),void 0!==t.data("ft-optional")&&!(e.v.ftOptional=!0)===t.data("ft-optional")&&(e.v.ftOptional=!1),e.v.ftMinLength=t.data("ft-minlength"),e.v.ftDateFormat=t.data("ft-date-format"),e.v.ftDateRange=t.data("ft-date-range"),e.v.ftRegex=t.data("ft-regex"),e.error.msg=t.data("ft-error-msg"),e},m=function(){var t=l(f);return void 0!==f.data("ft-verbose")&&!(t.verbose=!0)===f.data("ft-verbose")&&(t.verbose=!1),void 0!==f.data("ft-error-fields")&&(t.error.fields=f.data("ft-error-fields")),void 0!==f.data("ft-error-parent")&&(t.error.parent=f.data("ft-error-parent")),void 0!==f.data("ft-error-class")&&(t.error.class=f.data("ft-error-class")),t};i.fn.formtools.formatErrorMsg=function(t,e,r){t.after(i("<span>").attr("id",e).addClass("help-block ft-error").text(r))};var v=function(t){return e=s.translation[s.language],i.fn.formtools.settings.translation.custom&&(e=i.extend(!0,{},e,i.fn.formtools.settings.translation.custom)),e[t]}}(jQuery);