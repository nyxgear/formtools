!function(n){function r(r){i.find(f.error.class).removeClass(f.error.class.replace(".","")),f.error.fields&&n(f.error.fields).text(""),(f.verbose||r)&&i.find("input, select, textarea").each(function(){var t=n(this);if(void 0!==t.data("ft-date-format")&&(f.dateFormat=t.data("ft-date-format")),f.verbose&&t.attr("aria-describedby")&&n("#"+t.attr("aria-describedby")).detach(),r&&void 0!==r[t.attr("name")])if("date"==t.attr("type")){var e=moment(r[t.attr("name")],f.dateFormat,!0);t.val(e.format(f.dateFormat))}else t.val(r[t.attr("name")])})}function a(){var e=!0;return f.hooks.preValidate(i),r(),i.find("input, select, textarea").each(function(){var t=n(this);t.prop("disabled")||function(t){var e=!0;if(f=n.extend(!0,{},s,n.fn.formtools.settings,i.data("ft-settings"),l(),d(t)),t.val()||!f.v.ftOptional){if(f.v.ftRequired&&!t.val()&&(e=!1,f.error.dMsg=m("ft-required")),f.v.ftMinLength&&t.val().length<f.v.ftMinLength&&(e=!1,f.error.dMsg=m("ft-minlength")+" "+f.v.ftMinLength),f.v.ftRegex)new RegExp(f.v.ftRegex).test(t.val())||(e=!1,f.error.dMsg=m("ft-regex"));if("SELECT"!=t.prop("tagName")&&0<t.val().length)switch(t.attr("type")){case"email":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.val())||(e=!1,f.error.dMsg=m("ft-email-validation"));break;case"date":if(f.v.ftDateFormat){var r={};f.v.ftDateRange&&(r=f.v.ftDateRange.split(":"));var a=moment(t.val(),f.v.ftDateFormat,!0);a.isValid()?void 0!==r[0]&&void 0!==r[1]&&(r[0]&&(r.min=moment(r[0],moment.ISO_8601),r.min.isAfter(a)&&(e=!1,f.error.dMsg=m("ft-date-after")+" "+r.min.format(f.v.ftDateFormat))),r[1]&&(r.max=moment(r[1],moment.ISO_8601),r.max.isBefore(a)&&(e=!1,f.error.dMsg=m("ft-date-before")+" "+r.max.format(f.v.ftDateFormat)))):(e=!1,f.error.dMsg=m("ft-date-validation")+" "+f.v.ftDateFormat)}}}if(!e){if(t.closest(f.error.parent).addClass(f.error.class.replace(".","")),f.error.msg||(f.error.msg=f.error.dMsg),f.verbose){var o=t.attr("id");void 0===o&&(o=(new Date).getTime()),o="_ft-err-"+o,t.attr("aria-describedby",o),n.fn.formtools.formatErrorMsg(t,o,f.error.msg)}f.error.fields&&n(f.error.fields).append(f.error.msg+"<br>")}return e}(t)||(e=!1)}),f.hooks.postValidate(i),e}var i,f,e;n.fn.formtools=function(t,e){if("FORM"==this.prop("tagName")){if(i=this,f=n.extend(!0,{},s,n.fn.formtools.settings,this.data("ft-settings"),l()),"validate"===t)return a();"reset"===t?function(t){f.hooks.preReset(i,t),i.trigger("reset"),r(t),f.hooks.postReset(i,t)}(e):"settings"===t?i.data("ft-settings",e):(console.error("[form2] WARNING: invalid action"),console.error("[form2] given action:"),console.error(t))}else console.warn("[form2] WARNING: attempted execution of an action on non-form object"),console.warn("[form2] action:"),console.warn(t),console.warn("[form2] object:"),console.warn(this)};var s={hooks:{preValidate:function(t){},postValidate:function(t){},preReset:function(t,e){},postReset:function(t,e){}},verbose:!0,v:{ftDateFormat:"DD/MM/YYYY"},error:{parent:".form-group",class:".has-error",fields:"",msg:""},language:"en",translation:{en:{"ft-required":"Required field","ft-minlength":"Minimum characters required:","ft-regex":"Error","ft-email-validation":"Invalid email address","ft-date-validation":"Wrong date. Required date format as:","ft-date-range-after":"Required date after:","ft-date-range-before":"Required date before:"},it:{"ft-required":"Campo obbligatorio","ft-minlength":"Minimo caratteri richiesti: ","ft-regex":"Errore nel campo","ft-email-validation":"Indirizzo email non valido","ft-date-validation":"Data non valida. Formato data: ","ft-date-range-after":"Richiesta una data succesiva a: ","ft-date-range-before":"Richiesta una data precedente a: "}}};n.fn.formtools.settings={hooks:{},v:{},error:{},translation:{}};var d=function(t){var e={v:{},error:{}};return void 0!==t.data("ft-required")&&!(e.v.ftRequired=!0)===t.data("ft-required")&&(e.v.ftRequired=!1),void 0!==t.data("ft-optional")&&!(e.v.ftOptional=!0)===t.data("ft-optional")&&(e.v.ftOptional=!1),e.v.ftMinLength=t.data("ft-minlength"),e.v.ftDateFormat=t.data("ft-date-format"),e.v.ftDateRange=t.data("ft-date-range"),e.v.ftRegex=t.data("ft-regex"),e.error.msg=t.data("ft-error-msg"),e},l=function(){var t=d(i);return void 0!==i.data("ft-verbose")&&!(t.verbose=!0)===i.data("ft-verbose")&&(t.verbose=!1),void 0!==i.data("ft-error-fields")&&(t.error.fields=i.data("ft-error-fields")),void 0!==i.data("ft-error-parent")&&(t.error.parent=i.data("ft-error-parent")),void 0!==i.data("ft-error-class")&&(t.error.class=i.data("ft-error-class")),t};n.fn.formtools.formatErrorMsg=function(t,e,r){t.after(n("<span>").attr("id",e).addClass("help-block ft-error").text(r))};var m=function(t){return e=f.translation[f.language],n.fn.formtools.settings.translation.custom&&(e=n.extend(!0,{},e,n.fn.formtools.settings.translation.custom)),e[t]}}(jQuery);