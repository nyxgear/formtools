!function(t){var e,r,a,o=function(a){e.find(r.error["class"]).removeClass(r.error["class"].replace(".","")),r.error.fields&&t(r.error.fields).text(""),(r.verbose||a)&&e.find("input, select, textarea").each(function(){var e=t(this);if(void 0!==e.data("ft-date-format")&&(r.dateFormat=e.data("ft-date-format")),r.verbose&&e.attr("aria-describedby")&&t("#"+e.attr("aria-describedby")).detach(),a&&void 0!==a[e.attr("name")])if("date"==e.attr("type")){var o=moment(a[e.attr("name")],r.dateFormat,!0);e.val(o.format(r.dateFormat))}else e.val(a[e.attr("name")])})},n=function(a){var o=!0;if(r=t.extend(!0,{},s,t.fn.formtools.settings,e.data("ft-settings"),l(),d(a)),a.val()||!r.v.ftOptional){if(r.v.ftRequired&&!a.val()&&(o=!1,r.error.dMsg=m("ft-required")),r.v.ftMinLength&&a.val().length<r.v.ftMinLength&&(o=!1,r.error.dMsg=m("ft-minlength")+" "+r.v.ftMinLength),r.v.ftRegex){var n=new RegExp(r.v.ftRegex);n.test(a.val())||(o=!1,r.error.dMsg=m("ft-regex"))}if("SELECT"!=a.prop("tagName")&&a.val().length>0)switch(a.attr("type")){case"email":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.val())||(o=!1,r.error.dMsg=m("ft-email-validation"));break;case"date":if(r.v.ftDateFormat){var i={};r.v.ftDateRange&&(i=r.v.ftDateRange.split(":"));var f=moment(a.val(),r.v.ftDateFormat,!0);f.isValid()?void 0!==i[0]&&void 0!==i[1]&&(i[0]&&(i.min=moment(i[0],moment.ISO_8601),i.min.isAfter(f)&&(o=!1,r.error.dMsg=m("ft-date-after")+" "+i.min.format(r.v.ftDateFormat))),i[1]&&(i.max=moment(i[1],moment.ISO_8601),i.max.isBefore(f)&&(o=!1,r.error.dMsg=m("ft-date-before")+" "+i.max.format(r.v.ftDateFormat)))):(o=!1,r.error.dMsg=m("ft-date-validation")+" "+r.v.ftDateFormat)}}}if(!o){if(a.closest(r.error.parent).addClass(r.error["class"].replace(".","")),r.error.msg||(r.error.msg=r.error.dMsg),r.verbose){var v=a.attr("id")||(new Date).getTime();v="_ft-err-"+v,a.attr("aria-describedby",v),t.fn.formtools.formatErrorMsg(a,v,r.error.msg)}r.error.fields&&t(r.error.fields).append(r.error.msg+"<br>")}return o},i=function(t){r.hooks.preReset(e,t),e.trigger("reset"),o(t),r.hooks.postReset(e,t)},f=function(){var a=!0;return r.hooks.preValidate(e),o(),e.find("input, select, textarea").each(function(){var e=t(this);e.prop("disabled")||n(e)||(a=!1)}),r.hooks.postValidate(e),a};t.fn.formtools=function(a,o){if("FORM"==this.prop("tagName")){if(e=this,r=t.extend(!0,{},s,t.fn.formtools.settings,this.data("ft-settings"),l()),"validate"===a)return f();"reset"===a?i(o):"settings"===a?e.data("ft-settings",o):(console.error("[form2] WARNING: invalid action"),console.error("[form2] given action:"),console.error(a))}else console.warn("[form2] WARNING: attempted execution of an action on non-form object"),console.warn("[form2] action:"),console.warn(a),console.warn("[form2] object:"),console.warn(this)};var s={hooks:{preValidate:function(t){},postValidate:function(t){},preReset:function(t,e){},postReset:function(t,e){}},verbose:!0,v:{ftDateFormat:"DD/MM/YYYY"},error:{parent:".form-group","class":".has-error",fields:"",msg:""},language:"en",translation:{en:{"ft-required":"Required field","ft-minlength":"Minimum characters required:","ft-regex":"Error","ft-email-validation":"Invalid email address","ft-date-validation":"Wrong date. Required date format as:","ft-date-range-after":"Required date after:","ft-date-range-before":"Required date before:"},it:{"ft-required":"Campo obbligatorio","ft-minlength":"Minimo caratteri richiesti: ","ft-regex":"Errore nel campo","ft-email-validation":"Indirizzo email non valido","ft-date-validation":"Data non valida. Formato data: ","ft-date-range-after":"Richiesta una data succesiva a: ","ft-date-range-before":"Richiesta una data precedente a: "}}};t.fn.formtools.settings={hooks:{},v:{},error:{},translation:{}};var d=function(t){var e={v:{},error:{}};return void 0!==t.data("ft-required")&&(e.v.ftRequired=!0,t.data("ft-required")===!1&&(e.v.ftRequired=!1)),void 0!==t.data("ft-optional")&&(e.v.ftOptional=!0,t.data("ft-optional")===!1&&(e.v.ftOptional=!1)),e.v.ftMinLength=t.data("ft-minlength"),e.v.ftDateFormat=t.data("ft-date-format"),e.v.ftDateRange=t.data("ft-date-range"),e.v.ftRegex=t.data("ft-regex"),e.error.msg=t.data("ft-error-msg"),e},l=function(){var t=d(e);return void 0!==e.data("ft-verbose")&&(t.verbose=!0,e.data("ft-verbose")===!1&&(t.verbose=!1)),void 0!==e.data("ft-error-fields")&&(t.error.fields=e.data("ft-error-fields")),void 0!==e.data("ft-error-parent")&&(t.error.parent=e.data("ft-error-parent")),void 0!==e.data("ft-error-class")&&(t.error["class"]=e.data("ft-error-class")),t};t.fn.formtools.formatErrorMsg=function(e,r,a){e.after(t("<span>").attr("id",r).addClass("help-block ft-error").text(a))};var m=function(e){return a=r.translation[r.language],t.fn.formtools.settings.translation.custom&&(a=t.extend(!0,{},a,t.fn.formtools.settings.translation.custom)),a[e]}}(jQuery);